# 第 2 章 处理器、内存和指令

|本期版本|上期版本|
|:---:|:---:|
|`Wed Dec 28 11:37:26 CST 2022` | -|

## 2.2 寄存器和算术逻辑部件

**8位**

* 8 位寄存器可以容纳8比特，或者说 1 字节(Byte)
* 编号从右往左进行的，从0开始，分别是0、1、2、3、4、5、6、7
* 位0（第1位）是最低位，在最右边；位7（第8位）是最位，在最左边。

**16位**

* 16位寄存器可以存放2个字节，这称为1个字（word），各个数位的编号分别是 `0~15`
* `0~7` 是低字节，`8~15` 是高字节

**32位**

* 32位寄存器可以存放4字节，这称为1个双子（double word）,各个数位的编号分别是 `0~31`
* `0~15` 是低字，`16~31` 是高字

## 2.3 内存储器

* 内存按字节来组织，单次访问的最小单位是1字节
* 内存中的每个字节都对应着一个地址

## 2.4 指令和指令集

* 处理器的设计者用某些数来指示处理器所进行的操作，这称为**指令（Instruction**）或者叫机器指令
* 一般来说，指令由**操作码**和**操作数**构成，但也有小部分指令仅有操作码，而不含操作数
* **如果访问内存中的一个字，那么，他规定高字节位于高地址部分，低字节位于低地址部分，这称为低端字节序列（Little Endian）**
* 如果这个数已经在指令中给出，不需要再次访问内存，那么这个数就是**立即数**
* 因为处理器是自动按顺序取指令并加以执行的。在指令中混杂了非指令的数据会导致处理器不能正常工作。为此，指令和数据要分开存放，分别位于不同区域，存放指令的区域叫**代码区**，存放数据的区域叫**数据区**


## 2.5 古老的 Intel 8086 处理器

* 完成某个工作的所有指令，必须集中在一起，处于内存的某个位置形成一个段，叫做**代码段**
* 程序总要操作大量的数据，这些数据也应该集中在一起，位于内存中的某个地方，形成一个段，叫做**数据段**
*  **真实的内存地址，又称物理地址**

### 2.5.3 内存分段机制


* 分段开始地址位A532H的内存单元，这个起始地址就是**段地址**
* 相对于段开始处的距离，叫做**偏移地址**
* 一个内存单元地址可以用`段:偏移`或者`段地址:偏移地址`来表示，这就是通常所说的**逻辑地址**
* **当处理器访问内存时，它把指令中指定的内存地址看成是段内的偏移地址而不是物理地址**


### 2.5.4 8086 的内存分段机制

* 当一段代码开始执行时，CS指向代码段的起始地址，IP则指向段内偏移*
* **8086 处理器在形成物理地址时，先将段寄存器的内容左移4位（相当于乘以十六进制的10，或者是进制的16），形成20的段地址，然后在同16位的偏移地址相加，得到20位的物理地址**
* 偏移地址总要求从 `0000H` 开始
* 8086 处理器的逻辑分段，起始地址都是16字的倍数，这称为是按16字节对齐的


## Ref

* Volume 1 Chapter 1.3.1 Bit and Byte Order
* Volume 1 Chapter 3.4.1 General-Purpose Registers
* Volume 1 Chapter 3.4.2 Segment Registers